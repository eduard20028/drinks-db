(this.webpackJsonpsandbox=this.webpackJsonpsandbox||[]).push([[0],{55:function(e,t,a){e.exports=a(89)},60:function(e,t,a){},68:function(e,t,a){},85:function(e,t,a){},86:function(e,t,a){},87:function(e,t,a){},89:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(28),s=a.n(c),i=(a(60),a(18)),l=a(20),o=a(23),u=a(21),m=a(22),d=a(24),p=a(4),f=(a(41),a(61),p.initializeApp({apiKey:"AIzaSyC-kUemiaXvSMuAisGROwohHJ9jlgmIG7A",authDomain:"fir-movie-db-auth.firebaseapp.com",databaseURL:"https://fir-movie-db-auth.firebaseio.com",projectId:"fir-movie-db-auth",storageBucket:"fir-movie-db-auth.appspot.com",messagingSenderId:"148746996891",appId:"1:148746996891:web:85ae8d45a2f58d8ce2ca3e",measurementId:"G-PFBBENHDH2"})),b=r.a.createContext(),v=function(e){var t=e.children,a=Object(n.useState)(null),c=Object(d.a)(a,2),s=c[0],i=c[1];return Object(n.useEffect)((function(){f.auth().onAuthStateChanged(i)}),[]),r.a.createElement(b.Provider,{value:{currentUser:s}},t)},h=a(46),E=a(12),g=function(e){var t=e.component,a=Object(h.a)(e,["component"]),c=Object(n.useContext)(b).currentUser;return r.a.createElement(E.b,Object.assign({},a,{render:function(e){return c?r.a.createElement(t,e):r.a.createElement(E.a,{to:"/login"})}}))},k=a(9),N=a(92),x=a(30),y=a(31),j=(a(68),function(){var e=Object(n.useContext)(b).currentUser;return r.a.createElement("div",{className:"header"},r.a.createElement(N.a,{bg:"light",expand:"lg"},r.a.createElement("div",{className:"container d-flex justify-content-between"},r.a.createElement(k.b,{className:"badge",to:"/"},r.a.createElement("h4",null,"Drinks")),r.a.createElement("div",null,r.a.createElement(k.b,{to:"/profile",hidden:!e,"data-toggle":"tooltip",title:"PROFILE"},r.a.createElement(x.a,{className:"icon",icon:y.c,size:"lg"})),r.a.createElement(k.b,{to:"/favorite",hidden:!e,"data-toggle":"tooltip",title:"YOUR FAVORITE"},r.a.createElement(x.a,{className:"icon",icon:y.b,size:"lg"})),r.a.createElement(k.b,{to:"/drinks",hidden:!e,"data-toggle":"tooltip",title:"DRINKS"},r.a.createElement(x.a,{className:"icon",icon:y.a,size:"lg"}))),r.a.createElement("ul",{className:"navbar-nav"},!e&&r.a.createElement("li",{className:"nav-item"},r.a.createElement(k.b,{className:"btn btn-sm",role:"button",to:"/login"},"Login")),!e&&r.a.createElement("li",{className:"nav-item"},r.a.createElement(k.b,{className:"btn btn-sm",role:"button",to:"/sign-up"},"Sign Up")),e&&r.a.createElement("li",{className:"nav-item"},r.a.createElement(k.b,{onClick:function(){return f.auth().signOut()},className:"btn btn-sm",role:"button",to:"/"},"SignOut"))))))}),O=function(){var e=Object(n.useContext)(b).currentUser;return r.a.createElement("div",{className:"home"},r.a.createElement("div",{className:"jumbotron jumbotron-fluid"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"display-4"},"Welcome to Home Page!"),r.a.createElement("p",{className:"lead"},"This is a simple DB API where you can see different drinks, cocktails and others."),!e&&r.a.createElement("p",{className:"lead"},"To see more information you should",r.a.createElement(k.b,{to:"login",className:"alert-link"}," Login ")," or",r.a.createElement(k.b,{to:"sign-up",className:"alert-link"}," Register"),". Give it a click if you like."))))},w=a(7),D=a.n(w),I=a(16),C=a(51),R=a.n(C),S=a(32),P=a.n(S),A=Object(E.f)((function(e){var t=e.history,a={signInFlow:"popup",signInOptions:[P.a.auth.GoogleAuthProvider.PROVIDER_ID,P.a.auth.FacebookAuthProvider.PROVIDER_ID,P.a.auth.GithubAuthProvider.PROVIDER_ID]},c=Object(n.useCallback)(function(){var e=Object(I.a)(D.a.mark((function e(a){var n,r,c;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),n=a.target.elements,r=n.email,c=n.password,e.prev=2,e.next=5,f.auth().signInWithEmailAndPassword(r.value,c.value);case 5:t.push("/drinks"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),document.getElementById("emailHelp").innerHTML=e.t0;case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),[t]);return Object(n.useContext)(b).currentUser?r.a.createElement(E.a,{to:"/drinks"}):r.a.createElement("div",{className:"login"},r.a.createElement("h3",null,"Log In"),r.a.createElement("form",{onSubmit:c},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Email address"),r.a.createElement("input",{name:"email",type:"email",className:"form-control",id:"exampleInputEmail1","aria-describedby":"emailHelp"}),r.a.createElement("small",{id:"emailHelp",className:"form-text text-danger"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Password"),r.a.createElement("input",{name:"password",type:"password",className:"form-control",id:"exampleInputPassword1"})),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Submit"),r.a.createElement("div",{className:"login-with-sn"},r.a.createElement(R.a,{uiConfig:a,firebaseAuth:f.auth()}))))})),T=Object(E.f)((function(e){var t=e.history,a=Object(n.useCallback)(function(){var e=Object(I.a)(D.a.mark((function e(a){var n,r,c;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),n=a.target.elements,r=n.email,c=n.password,e.prev=2,e.next=5,f.auth().createUserWithEmailAndPassword(r.value,c.value).then((function(e){var t=e.user;f.database().ref("users/user_"+t.uid).child("email").set(r.value)}));case 5:t.push("/drinks"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),document.getElementById("emailHelp").innerHTML=e.t0;case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),[t]);return r.a.createElement("div",{className:"sign-up"},r.a.createElement("h3",null,"Sign Up"),r.a.createElement("form",{onSubmit:a},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Email address"),r.a.createElement("input",{name:"email",type:"email",className:"form-control",id:"exampleInputEmail1","aria-describedby":"emailHelp"}),r.a.createElement("small",{id:"emailHelp",className:"form-text text-danger"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Password"),r.a.createElement("input",{name:"password",type:"password",className:"form-control",id:"exampleInputPassword1"})),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Submit")))})),U=r.a.createContext(),H=U.Provider,F=U.Consumer,B=function(e){return function(t){return function(a){return r.a.createElement(F,null,(function(n){var c=e(n);return r.a.createElement(t,Object.assign({},a,c))}))}}},L=(a(85),function(){return r.a.createElement("div",{className:"loadingio-spinner-ripple-tz5hqef4fr"},r.a.createElement("div",{className:"ldio-alf9xkx8n6"},r.a.createElement("div",null),r.a.createElement("div",null)))}),z=(a(86),function(e){var t,a=e.items,n=e.refresh,c=e.addToFavorite,s=e.pageTitle;return t="favorite"===s&&a.length>0?"Your Favorite":"drink"===s&&a.length?"Random Drinks":"You can add your favorite in Random Drinks",r.a.createElement("div",{className:"drink-items"},r.a.createElement("h3",{className:"text-center"},t),r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("button",{type:"button",className:"refresh btn",onClick:n},r.a.createElement("i",{id:"icon",className:"fas fa-redo"}))),r.a.createElement("div",{className:"row justify-content-center"},a.map((function(e){return r.a.createElement("div",{id:e.idDrink,className:"card col-md-4 id-drink",with:"2px",key:e.idDrink},r.a.createElement("img",{src:e.strDrinkThumb,className:"card-img-top",alt:"..."}),r.a.createElement("div",{className:"btn-group btn-group-toggle","data-toggle":"buttons"},r.a.createElement("button",{type:"button",onClick:c,className:"btn toggle-btn"},r.a.createElement("i",{className:e.favorite?"fa fa-star icon":"far fa-star icon"})),r.a.createElement(k.b,{to:"/drinks/".concat(e.idDrink),type:"button",className:"btn"},r.a.createElement("i",{className:"fas fa-exclamation"}))),r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},e.strDrink)))}))))}),_=function(e){var t=f.auth().currentUser,a=e.target.closest(".id-drink"),n=f.database().ref("users/user_"+t.uid+"/favorite/drink_"+a.id);n.once("value",(function(e){e.val()?(n.set({}),G(a)):e.val()||(n.set(a.id),G(a))}))},G=function(e){var t=e.querySelector(".icon").classList;t.contains("far")?(t.remove("far"),t.add("fa")):t.contains("fa")&&(t.remove("fa"),t.add("far"))},M=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={items:[],user:!1,loading:!0},a.refresh=function(){a.setState({loading:!0}),a.loadItems()},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.loadItems()}},{key:"loadItems",value:function(){var e=this;(0,this.props.getData)().then((function(t){e.setState({items:t,user:f.auth().currentUser,loading:!1})}))}},{key:"render",value:function(){var e=this.state,t=e.loading,a=e.items,n=this.props.pageTitle;return t?r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement(L,null)):r.a.createElement(z,{items:a,refresh:this.refresh,addToFavorite:_,pageTitle:n})}}]),t}(n.Component),V=B((function(e){return{getData:e.getFavorite,pageTitle:"favorite"}}))(M),J=B((function(e){return{getData:e.getDrinks,pageTitle:"drink"}}))(M),W=(a(87),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).state={item:[],loading:!0},a.createDescriptionDiv=function(){var e=a.state.item,t=Object.keys(e),n=[];return t.forEach((function(a,c){a.match("strIngredient")&&e[a]&&(n.push(r.a.createElement("dt",{className:"col-sm-4",key:a},e[a])),n.push(r.a.createElement("dd",{className:"col-sm-8",key:c},e[t[c+15]]||"To your taste")))})),n},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.loadItem()}},{key:"loadItem",value:function(){var e=this,t=this.props;(0,t.getDrink)(t.itemId).then((function(t){e.setState({item:t,loading:!1})}))}},{key:"render",value:function(){var e=this.state,t=e.item,a=e.loading;return console.log(t.favorite),a?r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement(L,null)):r.a.createElement("div",{id:t.idDrink,className:"drink-page id-drink"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6 drink-poster d-flex align-items-center"},r.a.createElement("h2",null,t.strDrink),r.a.createElement("div",{className:"poster-cont"},r.a.createElement("button",{type:"button",onClick:_,className:"btn toggle-btn"},r.a.createElement("i",{className:t.favorite?"fa fa-star icon":"far fa-star icon"})),r.a.createElement("img",{src:t.strDrinkThumb,className:"poster-img rounded",alt:""}))),r.a.createElement("div",{className:"col-md-6 drink-info"},r.a.createElement("dl",{className:"row"},r.a.createElement("dt",{className:"col-sm-3"},"Ingredients"),r.a.createElement("dd",{className:"col-sm-9"},r.a.createElement("dl",{className:"row"},this.createDescriptionDiv())),r.a.createElement("dt",{className:"col-md-3"},"Instruction"),r.a.createElement("dd",{className:"col-md-9"},t.strInstructions)))))}}]),t}(n.Component)),Y=B((function(e){return{getDrink:e.getDrinkById}}))(W),q=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(v,null,r.a.createElement(k.a,null,r.a.createElement(j,null),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"app"},r.a.createElement(E.b,{path:"/",component:O,exact:!0}),r.a.createElement(g,{path:"/drinks",component:J,exact:!0}),r.a.createElement(g,{path:"/favorite",component:V,exact:!0}),r.a.createElement(E.b,{path:"/drinks/:id",render:function(e){var t=e.match.params.id;return r.a.createElement(Y,{itemId:t})},exact:!0}),r.a.createElement(E.b,{path:"/login",component:A,exact:!0}),r.a.createElement(E.b,{path:"/sign-up",component:T,exact:!0}),r.a.createElement(E.a,{to:"/"})))))}}]),t}(n.Component),K=function e(){var t=this;Object(i.a)(this,e),this.getResource=function(){var e=Object(I.a)(D.a.mark((function e(t){var a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://www.thecocktaildb.com/api/json/v1/1".concat(t));case 2:if((a=e.sent).ok){e.next=5;break}throw new Error("Could not fetch url ".concat(t," received ").concat(a.status));case 5:return e.abrupt("return",a.json());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.snapshot=Object(I.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.database().ref("users/user_"+f.auth().currentUser.uid+"/favorite/").once("value");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),this.getDrinks=Object(I.a)(D.a.mark((function e(){var a,n,r,c,s,i,l,o,u,m,p,f,b,v,h,E,g,k,N,x,y;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],n=new Map;case 2:if(!(n.size<9)){e.next=9;break}return e.next=5,t.getResource("/random.php");case 5:r=e.sent,n.set(r.drinks[0].idDrink,r.drinks[0]),e.next=2;break;case 9:return e.next=11,t.snapshot();case 11:if(!(c=e.sent).val()){e.next=39;break}s=c.val(),i=0,l=Object.entries(s);case 15:if(!(i<l.length)){e.next=39;break}for(o=Object(d.a)(l[i],2),u=o[1],m=!0,p=!1,f=void 0,e.prev=20,b=n.values()[Symbol.iterator]();!(m=(v=b.next()).done);m=!0)(h=v.value).idDrink===u?h.favorite=!0:h.favorite=!1;e.next=28;break;case 24:e.prev=24,e.t0=e.catch(20),p=!0,f=e.t0;case 28:e.prev=28,e.prev=29,m||null==b.return||b.return();case 31:if(e.prev=31,!p){e.next=34;break}throw f;case 34:return e.finish(31);case 35:return e.finish(28);case 36:i++,e.next=15;break;case 39:for(E=!0,g=!1,k=void 0,e.prev=42,N=n.values()[Symbol.iterator]();!(E=(x=N.next()).done);E=!0)y=x.value,a.push(y);e.next=50;break;case 46:e.prev=46,e.t1=e.catch(42),g=!0,k=e.t1;case 50:e.prev=50,e.prev=51,E||null==N.return||N.return();case 53:if(e.prev=53,!g){e.next=56;break}throw k;case 56:return e.finish(53);case 57:return e.finish(50);case 58:return e.abrupt("return",a);case 60:case"end":return e.stop()}}),e,null,[[20,24,28,36],[29,,31,35],[42,46,50,58],[51,,53,57]])}))),this.getFavorite=Object(I.a)(D.a.mark((function e(){var a,n,r,c,s,i,l,o;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.next=3,t.snapshot();case 3:if(!(n=e.sent).val()){e.next=17;break}r=n.val(),c=0,s=Object.entries(r);case 7:if(!(c<s.length)){e.next=17;break}return i=Object(d.a)(s[c],2),l=i[1],e.next=11,t.getResource("/lookup.php?i=".concat(l));case 11:(o=e.sent).drinks[0].favorite=!0,a.push(o.drinks[0]);case 14:c++,e.next=7;break;case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e)}))),this.getDrinkById=function(){var e=Object(I.a)(D.a.mark((function e(a){var n,r,c,s,i,l,o,u;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("/lookup.php?i=".concat(a));case 2:return n=e.sent,e.next=5,t.snapshot();case 5:if(r=e.sent,c=[],n.drinks[0].favorite=!1,!r.val()){e.next=20;break}s=r.val(),c.push(n.drinks[0]),i=0,l=Object.entries(s);case 12:if(!(i<l.length)){e.next=20;break}if(o=Object(d.a)(l[i],2),u=o[1],n.drinks[0].idDrink!==u){e.next=17;break}return n.drinks[0].favorite=!0,e.abrupt("break",20);case 17:i++,e.next=12;break;case 20:return c.push(n.drinks[0]),e.abrupt("return",c[0]);case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},X=(a(88),new K);s.a.render(r.a.createElement(H,{value:X},r.a.createElement(q,null)),document.getElementById("root"))}},[[55,1,2]]]);
//# sourceMappingURL=main.77ef1f92.chunk.js.map