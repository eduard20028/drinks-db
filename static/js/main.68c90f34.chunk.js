(this.webpackJsonpsandbox=this.webpackJsonpsandbox||[]).push([[0],{47:function(e,t,a){e.exports=a(66)},52:function(e,t,a){},64:function(e,t,a){},66:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(17),s=a.n(c),i=(a(52),a(14)),l=a(18),o=a(21),u=a(19),m=a(22),d=a(45),f=a(38),p=(a(53),a(55),f.initializeApp({apiKey:"AIzaSyC-kUemiaXvSMuAisGROwohHJ9jlgmIG7A",authDomain:"fir-movie-db-auth.firebaseapp.com",databaseURL:"https://fir-movie-db-auth.firebaseio.com",projectId:"fir-movie-db-auth",storageBucket:"fir-movie-db-auth.appspot.com",messagingSenderId:"148746996891",appId:"1:148746996891:web:85ae8d45a2f58d8ce2ca3e",measurementId:"G-PFBBENHDH2"})),b=r.a.createContext(),v=function(e){var t=e.children,a=Object(n.useState)(null),c=Object(d.a)(a,2),s=c[0],i=c[1];return Object(n.useEffect)((function(){p.auth().onAuthStateChanged(i)}),[]),r.a.createElement(b.Provider,{value:{currentUser:s}},t)},h=a(39),E=a(7),g=function(e){var t=e.component,a=Object(h.a)(e,["component"]),c=Object(n.useContext)(b).currentUser;return r.a.createElement(E.b,Object.assign({},a,{render:function(e){return c?r.a.createElement(t,e):r.a.createElement(E.a,{to:"/login"})}}))},k=a(8),x=a(69),w=a(28),N=a(30),y=function(){var e=Object(n.useContext)(b).currentUser;return r.a.createElement("div",{className:"header"},r.a.createElement(x.a,{bg:"light",expand:"lg"},r.a.createElement("div",{className:"container d-flex justify-content-between"},r.a.createElement(k.b,{className:"badge",to:"/"},r.a.createElement("h4",null,"Drinks")),r.a.createElement("div",null,e&&r.a.createElement(k.b,{to:"/profile"},r.a.createElement(w.a,{id:"icon",icon:N.b,color:"#6C757D",size:"lg"})),e&&r.a.createElement(k.b,{to:"/drinks"},r.a.createElement(w.a,{id:"icon",icon:N.a,color:"#6C757D",size:"lg"}))),r.a.createElement("ul",{className:"navbar-nav"},r.a.createElement("li",{className:"nav-item"},!e&&r.a.createElement(k.b,{className:"btn btn-secondary btn-sm",role:"button",to:"/login"},"Login")),r.a.createElement("li",{className:"nav-item"},!e&&r.a.createElement(k.b,{className:"btn btn-secondary btn-sm",role:"button",to:"/sign-up"},"Sign Up")),r.a.createElement("li",{className:"nav-item"},e&&r.a.createElement(k.b,{onClick:function(){return p.auth().signOut()},className:"btn btn-secondary btn-sm",role:"button",to:"/login"},"SignOut"))))))},j=function(){var e=Object(n.useContext)(b).currentUser;return r.a.createElement("div",{className:"home"},r.a.createElement("div",{className:"jumbotron jumbotron-fluid"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"display-4"},"Welcome to Home Page!"),r.a.createElement("p",{className:"lead"},"This is a simple DB API where you can see different drinks, cocktails and others."),!e&&r.a.createElement("p",{className:"lead"},"To see more information you should",r.a.createElement(k.b,{to:"login",className:"alert-link"}," Login ")," or",r.a.createElement(k.b,{to:"sign-up",className:"alert-link"}," Register"),". Give it a click if you like."))))},O=a(6),D=a.n(O),C=a(12),I=Object(E.f)((function(e){var t=e.history,a=Object(n.useCallback)(function(){var e=Object(C.a)(D.a.mark((function e(a){var n,r,c;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),n=a.target.elements,r=n.email,c=n.password,e.prev=2,e.next=5,p.auth().signInWithEmailAndPassword(r.value,c.value);case 5:t.push("/drinks"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),document.getElementById("emailHelp").innerHTML=e.t0;case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),[t]);return Object(n.useContext)(b).currentUser?r.a.createElement(E.a,{to:"/drinks"}):r.a.createElement("div",{className:"login"},r.a.createElement("h3",null,"Log In"),r.a.createElement("form",{onSubmit:a},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Email address"),r.a.createElement("input",{name:"email",type:"email",className:"form-control",id:"exampleInputEmail1","aria-describedby":"emailHelp"}),r.a.createElement("small",{id:"emailHelp",className:"form-text text-danger"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Password"),r.a.createElement("input",{name:"password",type:"password",className:"form-control",id:"exampleInputPassword1"})),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Submit")))})),S=Object(E.f)((function(e){var t=e.history,a=Object(n.useCallback)(function(){var e=Object(C.a)(D.a.mark((function e(a){var n,r,c;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),n=a.target.elements,r=n.email,c=n.password,e.prev=2,e.next=5,p.auth().createUserWithEmailAndPassword(r.value,c.value).then((function(e){var t=e.user;p.database().ref("users/user_"+t.uid).child("email").set(r.value)}));case 5:t.push("/drinks"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),document.getElementById("emailHelp").innerHTML=e.t0;case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),[t]);return r.a.createElement("div",{className:"sign-up"},r.a.createElement("h3",null,"Sign Up"),r.a.createElement("form",{onSubmit:a},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Email address"),r.a.createElement("input",{name:"email",type:"email",className:"form-control",id:"exampleInputEmail1","aria-describedby":"emailHelp"}),r.a.createElement("small",{id:"emailHelp",className:"form-text text-danger"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Password"),r.a.createElement("input",{name:"password",type:"password",className:"form-control",id:"exampleInputPassword1"})),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Submit")))})),U=r.a.createContext(),H=U.Provider,P=U.Consumer,A=function(e){return function(t){return function(a){return r.a.createElement(P,null,(function(n){var c=e(n);return r.a.createElement(t,Object.assign({},a,c))}))}}},F=(a(64),function(){return r.a.createElement("div",{className:"loadingio-spinner-ripple-tz5hqef4fr"},r.a.createElement("div",{className:"ldio-alf9xkx8n6"},r.a.createElement("div",null),r.a.createElement("div",null)))}),R=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={items:[],user:!1,loading:!0},a.addToFavorite=function(e){var t=a.state.user,n=e.target.closest("div"),r=p.database().ref("users/user_"+t.uid+"/favorite/drink_"+n.id);r.once("value",(function(e){e.val()?(r.set({}),a.toggleClass(n)):e.val()||(r.set(n.id),a.toggleClass(n))}))},a.toggleClass=function(e){var t=e.querySelector("#icon").classList;t.contains("far")?(t.remove("far"),t.add("fa")):t.contains("fa")&&(t.remove("fa"),t.add("far"))},a.refresh=function(){a.setState({loading:!0}),a.loadItems()},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.loadItems()}},{key:"loadItems",value:function(){var e=this;(0,this.props.getData)().then((function(t){e.setState({items:t,user:p.auth().currentUser,loading:!1})}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=t.items;return console.log(window.location.href.includes("profile")),console.log(window.location.href.includes("drinks")),a?r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement(F,null)):r.a.createElement("div",{className:"drink-items"},r.a.createElement("h3",{className:"text-center"},!n.length&&"You can add your favorite in Random Drinks",window.location.href.includes("drinks")&&n.length>0&&"Random drinks",window.location.href.includes("profile")&&n.length>0&&"Your Favorite"),r.a.createElement("div",{className:"d-flex justify-content-center"},window.location.href.includes("drinks")&&r.a.createElement("button",{type:"button",className:"refresh btn btn-danger",onClick:this.refresh},r.a.createElement("i",{id:"icon",className:"fas fa-redo"}))),r.a.createElement("div",{className:"row justify-content-center"},n.map((function(t){return r.a.createElement("div",{id:t.idDrink,className:"card col-md-4",with:"2px",key:t.idDrink},r.a.createElement("img",{src:t.strDrinkThumb,className:"card-img-top",alt:"..."}),r.a.createElement("button",{type:"button",onClick:e.addToFavorite,className:"btn btn-danger btn-sm"},!t.favorite&&"Add to Favorite",t.favorite&&"Delete from Favorite",r.a.createElement("i",{id:"icon",className:t.favorite?"fa fa-star":"far fa-star"})),r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},t.strDrink)))}))))}}]),t}(n.Component),B=A((function(e){return{getData:e.getFavorite}}))((function(e){var t=e.getData;return r.a.createElement(R,{getData:t})})),L=A((function(e){return{getData:e.getDrinks}}))((function(e){var t=e.getData;return r.a.createElement(R,{getData:t})})),T=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(v,null,r.a.createElement(k.a,null,r.a.createElement(y,null),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"app"},r.a.createElement(E.b,{path:"/",component:j,exact:!0}),r.a.createElement(g,{path:"/drinks",component:L,exact:!0}),r.a.createElement(g,{path:"/profile",component:B,exact:!0}),r.a.createElement(E.b,{path:"/login",component:I,exact:!0}),r.a.createElement(E.b,{path:"/sign-up",component:S,exact:!0}),r.a.createElement(E.a,{to:"/"})))))}}]),t}(n.Component),_=function e(){var t=this;Object(i.a)(this,e),this.getResource=function(){var e=Object(C.a)(D.a.mark((function e(t){var a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://www.thecocktaildb.com/api/json/v1/1".concat(t));case 2:if((a=e.sent).ok){e.next=5;break}throw new Error("Could not fetch url ".concat(t," received ").concat(a.status));case 5:return e.next=7,a.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getDrinks=Object(C.a)(D.a.mark((function e(){var a,n,r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[];case 1:if(!(a.length<9)){e.next=8;break}return e.next=4,t.getResource("/random.php");case 4:n=e.sent,a.push(n.drinks[0]),e.next=1;break;case 8:return r=new Promise((function(e){a.forEach((function(t){p.database().ref("users/user_"+p.auth().currentUser.uid+"/favorite/drink_"+t.idDrink).once("value",(function(n){n.val()?(t.favorite=!0,e(a)):(t.favorite=!1,e(a))}))}))})),e.abrupt("return",r.then((function(e){return e})));case 10:case"end":return e.stop()}}),e)}))),this.getFavorite=Object(C.a)(D.a.mark((function e(){var a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.next=3,p.database().ref("users/user_"+p.auth().currentUser.uid+"/favorite/").once("value").then(function(){var e=Object(C.a)(D.a.mark((function e(n){var r,c,s,i;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.val){e.next=13;break}r=n.val(),e.t0=D.a.keys(r);case 3:if((e.t1=e.t0()).done){e.next=13;break}return c=e.t1.value,s=c.replace(/\D+/g,""),e.next=8,t.getResource("/lookup.php?i=".concat(s));case 8:(i=e.sent).drinks[0].favorite=!0,a.push(i.drinks[0]),e.next=3;break;case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:return e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))},z=(a(65),new _);s.a.render(r.a.createElement(H,{value:z},r.a.createElement(T,null)),document.getElementById("root"))}},[[47,1,2]]]);
//# sourceMappingURL=main.68c90f34.chunk.js.map